"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[9400],{76042:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});var o=s(74848),r=s(28453);const t={sidebar_position:2},c="Code Registration",i={id:"main-system/python-execution-service/code-registration",title:"Code Registration",description:"Uploading New Source Code",source:"@site/docs/main-system/python-execution-service/code-registration.md",sourceDirName:"main-system/python-execution-service",slug:"/main-system/python-execution-service/code-registration",permalink:"/storage-system-documentation/docs/main-system/python-execution-service/code-registration",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/main-system/python-execution-service/code-registration.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"mainSystemSidebar",previous:{title:"Requirements On Source Code",permalink:"/storage-system-documentation/docs/main-system/python-execution-service/requirements-on-source-code"},next:{title:"Code Execution",permalink:"/storage-system-documentation/docs/main-system/python-execution-service/code-execution"}},d={},l=[{value:"Uploading New Source Code",id:"uploading-new-source-code",level:2},{value:"Fetching Source Code",id:"fetching-source-code",level:2},{value:"Deleting Source Code",id:"deleting-source-code",level:2}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"code-registration",children:"Code Registration"}),"\n",(0,o.jsx)(n.h2,{id:"uploading-new-source-code",children:"Uploading New Source Code"}),"\n",(0,o.jsxs)(n.p,{children:["The post request must be of ",(0,o.jsx)(n.code,{children:"form-data"})," type (for source code uploading)."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"/uploadNewSourceCode"})," ",(0,o.jsx)(n.em,{children:"(POST)"})]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The body of ",(0,o.jsx)(n.code,{children:"form-data"})," request must contain ",(0,o.jsx)(n.code,{children:"files"})," key and the values are the actual files."]}),"\n",(0,o.jsx)(n.p,{children:"There are multiple kinds of responses:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"source code registered successfully"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="201 Created"',children:'{\r\n    "message": "Files were uploaded",\r\n    "sourceCodeId": "3cd89158-9968-44cc-94c6-629c68f551dd"\r\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The response body in this case contains ",(0,o.jsx)(n.code,{children:"sourceCodeId"})," which is a handle for this code from now on."]}),"\n",(0,o.jsxs)(n.p,{children:["Now any other component using ",(0,o.jsx)(n.code,{children:"Python Execution Service"})," only remembers ",(0,o.jsx)(n.code,{children:"sourceCodeId"}),". This serves as a handle to that source code."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"no files in the request"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="400 Bad Request"',children:'{\r\n    "message": "No files were uploaded."\r\n}\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["some files not having ",(0,o.jsx)(n.code,{children:".py"})," extension."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="400 Bad Request"',children:'{\r\n    "message": "All files must be python files"\r\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"fetching-source-code",children:"Fetching Source Code"}),"\n",(0,o.jsxs)(n.p,{children:["For fetching an existing source code based on ",(0,o.jsx)(n.code,{children:"sourceCodeId"}),", there is ",(0,o.jsxs)(n.strong,{children:["/sourceCodes/",":sourceCodeId"]})," ",(0,o.jsx)(n.em,{children:"(GET)"})," endpoint."]}),"\n",(0,o.jsxs)(n.p,{children:["For instance for this example request ",(0,o.jsx)(n.code,{children:"{{PYTHON_EXECUTION_SERVICE_URL}}/sourceCodes/3cd89158-9968-44cc-94c6-629c68f551dd"})," with empty body it retuns the following:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="Response for source code fethching"',children:'{\r\n    "sourceCode": [\r\n        {\r\n            "name": "main.js",\r\n            "code": "const { getResponseMessage } = require(\'./second\');\\r\\n\\r\\nconst helloWorld = (name) => {\\r\\n    return getResponseMessage() + name;\\r\\n}\\r\\n\\r\\nmodule.exports = helloWorld;"\r\n        },\r\n        {\r\n            "name": "second.js",\r\n            "code": "console.log(\'hello world\');\\r\\n\\r\\nconst getResponseMessage = () => {\\r\\n    return \'hello world\';\\r\\n}\\r\\n\\r\\nmodule.exports = {\\r\\n    getResponseMessage\\r\\n}"\r\n        }\r\n    ]\r\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"deleting-source-code",children:"Deleting Source Code"}),"\n",(0,o.jsxs)(n.p,{children:["Last simple endpoint is for source code deletion. Endpoint is basically the same (",(0,o.jsxs)(n.strong,{children:["/sourceCodes/",":sourceCodeId"]})," ",(0,o.jsx)(n.em,{children:"(DELETE)"}),") except for the http method type."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="200 OK Response"',children:'{\r\n    "message": "Source code deleted"\r\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>i});var o=s(96540);const r={},t=o.createContext(r);function c(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);